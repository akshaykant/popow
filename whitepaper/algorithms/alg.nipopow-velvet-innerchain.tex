\begin{algorithm}[H]
    \caption{\label{alg.nipopow-velvet-innerchain}The modified constructInnerChain
    that allows for a velvet fork.}
    \begin{algorithmic}[1]
        \Function{\sf constructInnerChain'}{$\chain$, $\mu$, $b$, realLink, blockById}
            \Let{B}{\chain[-1]}
            \Let{\textsf{aux}}{[B]}
            \Let{\pi}{[B]}
            \While{$B \neq b$}
                \State $(B, \textsf{aux'})$
                \begin{varwidth}[t]{\linewidth}
                    $\gets$
                    \par
                    \textsf{followUp}$(B, \mu,
                    \textsf{realLink}, \textsf{blockById})$
                \end{varwidth}
                \State{$\textsf{aux}$.append($\textsf{aux'}$)}
                \State{$\pi$.append($B$)}
            \EndWhile
            \State\Return{$\pi$, aux}
        \EndFunction
    \vskip8pt
    \end{algorithmic}
\end{algorithm}
