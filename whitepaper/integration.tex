\section{Applications \& Evaluation}
\label{sec.applications}

\subsection{Multi-blockchain wallets}
\label{sec.multichain}
An application of our technique is an efficient multi-cryptocoin client.
Consider a merchant who wishes to accept payments in any cryptocoin, not just
the popular ones. The na\"ive approach would be to install an SPV client for each known cryptocoin.
This approach would entail downloading the header chain for each cryptocoin, and
periodically syncing up by fetching any newly generated block headers. An
alternative would be to use an online service supporting multiple currencies,
but this introduces reliance on a third party (e.g. Jaxx and Coinomi rely on
third party networks).

A NIPoPoW-based client would not download the entire header chain, but would intead only receive NiPoPoW proofs each time a payment is received. When a peer informs the client about a payment, they include a block index $\ell$ and NiPoPoW proof of transaction inclusion. The peer must then query \emph{all} of their connected peers, requesting any better better proof for the same predicate. After waiting a short time period for a response, the client runs the \texttt{verify-infix} routine on all received proofs, and accepts the transaction if the output is \emph{true}. Although initially such proofs must be relative genesis, the client may store the most recently-known ($k$-stable) blockhash for each cryptocoin, such that future payments can include NiPoPoW proofs relative to that. Thus for popluar cryptocoins, the NIPoPoW-based
client downloads nearly every block header, like an ordinary SPV client; but for
cryptocoins used infrequently, the NIPoPoW-based client can skip over most
blocks.

\subsection{Simulation}
We simulated the resources savings resulting from the use of a NIPoPoW-based
client. We model the arrival of payments in each cryptocoin as a Poisson process
and assume that the market cap of a cryptocoin is a proxy for usage. Currently,
a total of 731 cryptocurrencies are listed on coin market
directories\footnote{\url{https://coinmarketcap.com/}}. We narrow our focus to
the 80 cryptocurrencies that have their own PoW blockchains (i.e., no PoS) with
a market cap of over USD \$100,000.

In Table~\ref{tbl.currencies} we show aggregate statistics about these 80
cryptocurrencies, grouped according to the their PoW puzzle. While the entire
chain in Bitcoin only amounts to 40 MB, taken together, the 80 cryptocurrencies
comprise 10 GB of proofs-of-work, and generate 10 MB more each day. In
Table~\ref{tbl.experiment} we show the resulting bandwidth costs from simulating
a period of 60 days with $m=24, k=6$, with varying rates of payments received.
%
For the na\"ive SPV client, the total bandwidth cost is dominated by fetching
the entire chain of headers, which the NIPoPoW client avoids. The marginal
cost for na\"ive SPV depends on the number of blocks generated per day, as well
as the transaction inclusion proofs associated with each payment. The NIPoPoW
based client provides the most savings when the number of transactions per day
is smallest, reducing the necessary bandwidth per day (excluding the initial
sync up) by 90\%.

\begin{table}
  \caption{Cost of header chains for all active PoW-based cryptocoins
           (collected from \url{coinwarz.com})}
  \label{tbl.currencies}
  \small
  \centering
  \begin{tabular}{l|l|l|l}
    {\bf Hash} & {\bf Coins} & {\bf Size today} & {\bf Growth rate}  \\
    \hline
    Scrypt  & 44  & 4.3 GB  & 5.5 MB / day \  \\
    SHA-256  & 15  & 1.4 GB  & 937.0 kB / day \  \\
    X11  & 5  & 581.1 MB  & 556.3 kB / day \  \\
    Quark  & 3  & 647.9 MB  & 518.4 kB / day \  \\
    CryptoNight  & 2  & 199.0 MB  & 115.2 kB / day \  \\
    EtHash  & 2  & 588.6 MB  & 921.6 kB / day \  \\
    Groestl  & 2  & 300.3 MB  & 184.2 kB / day \  \\
    NeoScrypt  & 2  & 310.6 MB  & 153.6 kB / day \  \\
    Others  & 5  & 266.2 MB  & 311.1 kB / day \  \\
    % "Others" above is the sum of these:
    % Equihash  & 2  & 17.7 MB  & 92.2 kB / day \  \\
    % Keccak  & 1  & 161.1 MB  & 115.2 kB / day \  \\
    % X13  & 1  & 30.0 MB  & 57.6 kB / day \  \\
    % Lyra2REv2  & 1  & 57.4 MB  & 46.1 kB / day \  \\
    \hline
    Total  & 80   &  8.5 GB  & 9.2 MB  / day  \\
  \end{tabular}
\end{table}

\begin{table}
  \caption{Simulated bandwidth of multi-blockchain clients after two months (Averaged over 10 trials each)}
  \label{tbl.experiment}
  \small
  \centering
  \begin{tabular}
    {
      l@{\hspace{2pt}}|
      l@{\hspace{2pt}}l@{\hspace{2pt}}|
      l@{\hspace{2pt}}l@{\hspace{2pt}}|
      l@{\hspace{2pt}}}

      \multicolumn{1}{l|}{\bf Daily} & \multicolumn{2}{c|}{\bf Naive SPV} & \multicolumn{2}{c|}{\bf NIPoPoW} \\
      {\bf tx} & {\bf Total} & {\bf (Daily)} & {\bf Total} & {\bf (Daily)} & {\bf Savings} \\
    \hline
    100   &  5.5 GB & (5.5 MB)   & 31.7 MB & (507 kB)   & 99\% (91\%) \\
    500   &  5.5 GB & (5.7 MB)   & 68.2 MB & (1.1 MB)     & 99\% (81\%) \\
    1000  &  5.5 GB & (6.0 MB)   & 99.1 MB & (1.6 MB)     & 98\% (73\%) \\
    3000  &  5.6 GB & (7.0 MB)   & 192 MB& (3.1 MB)     & 97\% (56\%) \\
    \end{tabular}
  \end{table}


